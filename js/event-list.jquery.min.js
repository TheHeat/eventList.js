function formatDate(a){var b="";switch(a){case 1:case 21:case 31:b="st";break;case 2:case 22:b="nd";break;case 3:case 23:b="rd";break;default:b="th"}return a+b}function formatTime(a,b){return 12>a?a+":"+pad(b)+"am":a-12+":"+pad(b)+"pm"}function pad(a){return 10>a?"0"+a:a}var d_names=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"),m_names=new Array("January","February","March","April","May","June","July","August","September","October","November","December");!function(){var a,b=[].slice;a=function(){var a,c,d,e,f,g;return e=1<=arguments.length?b.call(arguments,0):[],f=/(^|\s)((?:https?|ftp):\/\/[\-A-Z0-9+\u0026@#\/%?=~_|!:,.;]*[\-A-Z0-9+\u0026@#\/%=~_|])/gi,e.length>0?(d=e[0],c=function(){var b;b=[];for(a in d)g=d[a],"callback"!==a&&b.push(" "+a+"='"+g+"'");return b}().join(""),this.replace(f,function(a,b,e){var f;return f=("function"==typeof d.callback?d.callback(e):void 0)||"<a href='"+e+"'"+c+">"+e+"</a>",""+b+f})):this.replace(f,"$1<a href='$2'>$2</a>")},String.prototype.autoLink=a}.call(this),$.fn.eventList=function(a,b){var c={maxResults:8},d=$.extend(!0,c,b),e=decodeURIComponent($.param(d));$(this).html('<ol class="events-list"><li>Nothing to see here!</li></ol><div class="feed-links"></div>');var f="https://www.googleapis.com/calendar/v3/calendars/"+a+"/events?"+e,g="http://www.google.com/calendar/embed?src="+a,h="http://www.google.com/calendar/ical/"+a+"/public/basic.ics";$.getJSON(f,function(a){$.each(a.items,function(a,b){0==a&&$(".events-list li").first().hide();var c=new Date(b.start.dateTime),d=c.getHours(),e=c.getMinutes(),f=c,g=d_names[c.getDay()]+" "+formatDate(c.getDate())+" "+m_names[c.getMonth()]+" "+c.getFullYear(),h="";(0!=c.getHours()||0!=c.getMinutes())&&(h=formatTime(d,e));var i=b.location,j='<a href="http://maps.google.com/maps?q='+i+'"target="_blank">'+i+"</a>",k='<h3 itemprop="name">'+b.summary+"</h3>",l='<div class="event-description" itemprop="description">'+b.description.autoLink()+"</div>";$(".events-list li").last().before('<li itemscope itemtype="http://schema.org/Event"><meta itemprop="startDate" content="'+f+'">'+'<time datetime="'+f+'">'+g+"</time>"+k+l+h+j+"</li>")})});var i='<a href="'+h+'">'+"iCal"+"</a>",j='<a href="'+g+'">'+"Google Calendar"+"</a>";$(".feed-links").html(j+" | "+i)};