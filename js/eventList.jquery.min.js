function formatDate(a){var b="";switch(a){case 1:case 21:case 31:b="st";break;case 2:case 22:b="nd";break;case 3:case 23:b="rd";break;default:b="th"}return a+b}function formatTime(a,b){return 12>a?a+":"+pad(b)+"am":a-12+":"+pad(b)+"pm"}function pad(a){return 10>a?"0"+a:a}function eventList(a){$("#eventList").html('<ol class="events-list"><li>Nothing to see here!</li></ol><div class="feed-links"></div>');var b="http://www.google.com/calendar/feeds/"+a+"/public/full?orderby=starttime&sortorder=ascending&futureevents=true&alt=json",c="http://www.google.com/calendar/embed?src="+a,d="http://www.google.com/calendar/feeds/"+a+"/public/full?orderby=starttime&sortorder=ascending&futureevents=true";$.getJSON(b,function(a){$.each(a.feed.entry,function(a,b){0==a&&$(".events-list li").first().hide();var c=new Date(b.gd$when[0].startTime),d=c.getHours(),e=c.getMinutes(),f=c.toISOString(),g=d_names[c.getDay()]+" "+formatDate(c.getDate())+" "+m_names[c.getMonth()]+" "+c.getFullYear(),h="";(0!=c.getHours()||0!=c.getMinutes())&&(h=formatTime(d,e)),b.gd$where[0].valueString;var k='<h3 itemprop="name">'+b.title.$t+"</h3>",l="<p>"+b.content.$t+"</p>";$(".events-list li").last().before('<li itemscope itemtype="http://schema.org/Event"><meta itemprop="startDate" content="'+f+'">'+'<time datetime="'+f+'">'+g+"</time>"+k+l.autoLink()+h+"</li>")})});var f='<a href="'+d+'">'+"RSS"+"</a>",g='<a href="'+d+'">'+"iCal"+"</a>",h='<a href="'+c+'">'+"Google Calendar"+"</a>";$(".feed-links").html(h+" "+f+" "+g)}var d_names=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"),m_names=new Array("January","February","March","April","May","June","July","August","September","October","November","December");!function(){var a,b=[].slice;a=function(){var a,c,d,e,f,g;return e=1<=arguments.length?b.call(arguments,0):[],f=/(^|\s)((?:https?|ftp):\/\/[\-A-Z0-9+\u0026@#\/%?=~_|!:,.;]*[\-A-Z0-9+\u0026@#\/%=~_|])/gi,e.length>0?(d=e[0],c=function(){var b;b=[];for(a in d)g=d[a],"callback"!==a&&b.push(" "+a+"='"+g+"'");return b}().join(""),this.replace(f,function(a,b,e){var f;return f=("function"==typeof d.callback?d.callback(e):void 0)||"<a href='"+e+"'"+c+">"+e+"</a>",""+b+f})):this.replace(f,"$1<a href='$2'>$2</a>")},String.prototype.autoLink=a}.call(this);